# Mongoose Wizard Project

This project is generated by Mongoose Wizard, https://mongoose.ws/wizard/
Mongoose Wizard is a visual Web dashboard builder for embedded devices.

## Build and flash

**Step 1. Download generated project to your workstation**

Click on the "Generate" button to download the project to your workstation

**Step 2. Build and run the project**

- If your target IDE is CubeIDE, then start Cube IDE (use Cube 1.16.0 or later), then:
  1. Choose File / Import
  2. Choose "Existing Projects into Workspace", click Next,
  3. Click on "Directory", choose dir with generated files, click Finish
- If your target IDE is MCUXpresso, follow instructions for Cube IDE above
- If your target IDE is Arduino, open `wizard.ino` in the Arduino IDE
- If your target IDE is other - follow your IDE's guide

## Injecting Mongoose to an existing firmware

In order to move this functionality to some existing firmware code, perform
the following steps:

1. Generate new wizard project with your target architecture
2. Copy / link the `mongoose/` folder from wizard project to your existing project
3. Edit the `mongoose/mongoose_config.h` if necessary
4. Add `mongoose/` to your include paths, and `mongoose/*.c` to source files. This depends on your IDE
5. On ARMs with built-in Ethernet, disable CPU cache
6. Add the following to your main C file:

```c
#include "mongoose_glue.h"
// #include "mongoose_hal.h"  // A helper micro-HAL for your platform

...

// Uncomment if required
//
// uint64_t mg_millis(void) {
//   return HAL_GetTick();
// }
//
// bool mg_random(void *buf, size_t len) {
//   for (size_t n = 0; n < len; n += 4) {
//     uint32_t r = hal_rng_read();
//     memcpy((char *) buf + n, &r, n + 4 > len ? len - n : 4);
//   }
//   return true;
// }
//
// int _write(int fd, char *buf, unsigned int len) {
//   if (fd == 1) hal_uart_write_buf(HAL_DEBUG_UART, buf, (size_t) len);
//   return len;
// }


  // Add to the end of main(). Uncomment what needs to be initialized.
  //
  // hal_clock_init();
  // hal_uart_init(HAL_DEBUG_UART, 115200);
  // hal_rng_init();
  // hal_leds_init();
  // hal_ethernet_init();
  //
  // You may need to edit your linker script to include the .eth_ram section
  // Example for the STM32H723:
  //
  // MEMORY
  // {
  //  RAM_D2(rwx): ORIGIN = 0x30000000, LENGTH = 32K
  //  ...
  // }
  //
  //  .eth_ram : { *(.eth_ram .eth_ram*) } > RAM_D2 AT > ROM
  mongoose_init();

  // Event loop. mongoose_poll() does not block.
  // Add it into your existing barememetal superloop,
  // or start as a separate RTOS task with minimum of 8k stack
  for (;;) {
    mongoose_poll();
  }

```

## Guides and Tutorials

- [Video Guides](https://www.youtube.com/@mongoose-networking-library/videos)
- [Ethernet hardware](https://mongoose.ws/documentation/tutorials/hardware/)
- [Firmware OTA updates](https://mongoose.ws/documentation/tutorials/firmware-update/)
- [Mongoose User Guide](https://mongoose.ws/documentation/)
